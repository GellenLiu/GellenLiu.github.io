{"version":3,"sources":["webpack:///./src/views/javascript/hyperLink.vue","webpack:///./src/data/codes/javascript/hyperLink.js","webpack:///./src/views/javascript/hyperLink.vue?e511","webpack:///./src/views/javascript/hyperLink.vue?8188","webpack:///./src/views/javascript/hyperLink.vue?8bd3"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","model","value","inputContent","callback","$$v","expression","on","transform","_v","domProps","_s","hyperLinkcontent","codeContent","staticRenderFns","LINK_IDENTIFICATION","hyperLink","Vue","constructor","codes","mounted","transformLinks","htmlDecode","str","s","length","replace","htmlEncode","fixLink","startsWith","that","normalStr","urlReg","urls","link","$0","push","encodeStr","reg","RegExp","url","shift","copy","text","fcb","errCb","navigator","clipboard","writeText","then","err","textArea","document","createElement","window","location","href","style","top","left","position","body","appendChild","focus","select","execCommand","removeChild","copyCodeContent","Message","success","error","Component","components","Editor","CodeShow","component"],"mappings":"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","file":"js/chunk-2d22c50f.a0bfca3a.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"demo-content\"},[_c('div',[_c('el-input',{attrs:{\"placeholder\":\"input your message\"},model:{value:(_vm.inputContent),callback:function ($$v) {_vm.inputContent=$$v},expression:\"inputContent\"}}),_c('el-button',{on:{\"click\":_vm.transform}},[_vm._v(\"转换\")]),_c('div',{staticClass:\"show-wrap\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.hyperLinkcontent)}})])],1),_c('code-show',{attrs:{\"code\":_vm.codeContent}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default `function htmlDecode(str: string): string {\n    let s = '';\n    if (str.length == 0) return '';\n    s = str.replace(/&amp;/g, '&');\n    s = s.replace(/&lt;/g, '<');\n    s = s.replace(/&gt;/g, '>');\n    s = s.replace(/&nbsp;/g, ' ');\n    s = s.replace(/&#39;/g, \"'\");\n    s = s.replace(/&quot;/g, '\"');\n    s = s.replace(/&ldquo;/g, '“');\n    s = s.replace(/&rdquo;/g, '”');\n    s = s.replace(/&yen;/g, '¥');\n    return s;\n}\n\nfunction htmlEncode(str) {\n    let s = '';\n    if (str.length == 0) return '';\n    s = s.replace(/</g, '&lt;');\n    s = s.replace(/>/g, '&gt;');\n    s = s.replace(/ /g, '&nbsp;');\n    s = s.replace(/\\'/g, '&#39;');\n    s = s.replace(/\\\"/g, '&quot;');\n    s = s.replace(/“/g, '&ldquo;');\n    s = s.replace(/”/g, '&rdquo;');\n    s = s.replace(/¥/g, '&yen;');\n    s = str.replace(/&/g, '&amp;');\n    return s;\n}\nfixLink(str: string) {\n    if (!str.startsWith('http')) {\n        return '//' + str;\n    }\n    return str;\n}\n\n/**\n * 将文本中的链接识别出来并转为JSON\n */\ntransformLinks(str: string) {\n    const that = this;\n    /** 这里可以这样判定当前信息是否为图片是因为信息为图片时是一条单独的信息，且不会被转义, 若是用户输入的内容会被转义 */\n    if (str.startsWith('<img')) return str;\n\n    const normalStr = that.htmlDecode(str);\n    /** 正常匹配url正则即可 */\n    const urlReg =\n        /(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.(com|edu|gov|int|net|org|info|cn|mo|tw|hk|io){1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=;]*)/g;\n    const urls: string[] = [];\n    const link = normalStr.replace(urlReg, function ($0) {\n        urls.push($0);\n        return LINK_IDENTIFICATION;\n    });\n    const encodeStr = this.htmlEncode(link);\n    const reg = new RegExp(LINK_IDENTIFICATION, 'g');\n    return encodeStr.replace(reg, function () {\n        const url = urls.shift() || '';` + \n        'return `<a href=\"${that.fixLink(url)}\" target=\"_blank\" class=\"msg-link\">${url}</a>`;' + `\n    });\n}\n`\n\n","\nimport { Component, Vue } from 'vue-property-decorator';\nimport { Message } from 'element-ui';\nimport Editor from '@/components/monacoEditor.vue';\nlet LINK_IDENTIFICATION = 'TElOS19JREVOVElGSUNBVElPTg==';\nimport codes from '@/data/codes/javascript/hyperLink';\nimport CodeShow from '@/components/CodeShow.vue';\n\n@Component({\n    components: { Editor, CodeShow }\n})\nexport default class hyperLink extends Vue {\n    codeContent = codes;\n    inputContent = '';\n    hyperLinkcontent = '';\n    mounted() {}\n\n    transform() {\n        this.hyperLinkcontent =  this.transformLinks(this.inputContent);\n    }\n\n    htmlDecode(str: string): string {\n        let s = '';\n        if (str.length == 0) return '';\n        s = str.replace(/&amp;/g, '&');\n        s = s.replace(/&lt;/g, '<');\n        s = s.replace(/&gt;/g, '>');\n        s = s.replace(/&nbsp;/g, ' ');\n        s = s.replace(/&#39;/g, \"'\");\n        s = s.replace(/&quot;/g, '\"');\n        return s;\n    }\n\n    htmlEncode(str: string) {\n        let s = '';\n        if (str.length == 0) return '';\n        s = str.replace(/&/g, '&amp;');\n        s = s.replace(/</g, '&lt;');\n        s = s.replace(/>/g, '&gt;');\n        s = s.replace(/ /g, '&nbsp;');\n        s = s.replace(/\\'/g, '&#39;');\n        s = s.replace(/\\\"/g, '&quot;');\n        return s;\n    }\n\n    fixLink(str: string) {\n        if (!str.startsWith('http')) {\n            return `//${str}`;\n        }\n        return str;\n    }\n\n    /**\n     * 将文本中的链接识别出来并转为JSON\n     */\n    transformLinks(str: string) {\n        const that = this;\n        /** 这里可以这样判定当前信息是否为图片是因为信息为图片时是一条单独的信息，且不会被转义, 若是用户输入的内容会被转义 */\n        if (str.startsWith('<img')) return str;\n\n        const normalStr = that.htmlDecode(str);\n        /** 正常匹配url正则即可 */\n        const urlReg =\n            /(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.(com|edu|gov|int|net|org|info|cn|mo|tw|hk|io){1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=;]*)/g;\n        const urls: string[] = [];\n        const link = normalStr.replace(urlReg, function ($0) {\n            urls.push($0);\n            return LINK_IDENTIFICATION;\n        });\n        const encodeStr = this.htmlEncode(link);\n        const reg = new RegExp(LINK_IDENTIFICATION, 'g');\n        return encodeStr.replace(reg, function () {\n            const url = urls.shift() || '';\n            return `<a href=\"${that.fixLink(url)}\" target=\"_blank\" class=\"msg-link\">${url}</a>`;\n        });\n    }\n\n    copy(text: string, fcb: Function, errCb: Function) {\n        if (!navigator.clipboard) {\n            let textArea = document.createElement('textarea');\n            textArea.value = window.location.href;\n            textArea.style.top = '0';\n            textArea.style.left = '0';\n            textArea.style.position = 'fixed';\n            document.body.appendChild(textArea);\n            textArea.focus();\n            textArea.select();\n            try {\n                document.execCommand('copy');\n                fcb && fcb();\n            } catch (err) {\n                errCb && errCb();\n            }\n            document.body.removeChild(textArea);\n            return;\n        }\n        navigator.clipboard.writeText(text).then(\n            function () {\n                fcb && fcb();\n            },\n            function (err) {\n                errCb && errCb();\n            }\n        );\n    }\n    copyCodeContent() {\n        this.copy(\n            this.codeContent,\n            () => {\n                Message.success('复制成功');\n            },\n            () => {\n                Message.error('复制失败');\n            }\n        );\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hyperLink.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hyperLink.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./hyperLink.vue?vue&type=template&id=60645e0a&\"\nimport script from \"./hyperLink.vue?vue&type=script&lang=ts&\"\nexport * from \"./hyperLink.vue?vue&type=script&lang=ts&\"\nimport style0 from \"@/styles/javascript/copy.scss?vue&type=style&index=0&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}