{"version":3,"sources":["webpack:///./src/views/shareScreen/index.vue?79c4","webpack:///./src/views/shareScreen/index.vue","webpack:///./src/utils/utils.ts","webpack:///./src/data/codes/shareScreen/index.js","webpack:///./src/views/shareScreen/index.vue?5e53","webpack:///./src/views/shareScreen/index.vue?ecac","webpack:///./src/views/shareScreen/index.vue?39b3"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","on","startShare","_v","stopShare","codes","staticRenderFns","oModule","copy","text","fcb","errCb","navigator","clipboard","writeText","then","err","textArea","document","createElement","value","window","location","href","style","top","left","position","body","appendChild","focus","select","execCommand","removeChild","ShareScreen","Vue","constructor","stream","codeContent","mounted","console","log","that","options","video","cursor","audio","startCapture","displayMediaOptions","captureStream","mediaDevices","getDisplayMedia","live","error","getElementById","srcObject","controls","play","pushStream","copyCodeContent","utils","Message","success","Component","components","Editor","CodeShow","component"],"mappings":"kHAAA,W,2CCAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAUF,EAAIG,MAAMC,YAAY,OAAOF,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,QAAQ,CAACG,YAAY,QAAQC,MAAM,CAAC,GAAK,WAAWJ,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,MAAM,CAACG,YAAY,YAAYE,GAAG,CAAC,MAAQP,EAAIQ,aAAa,CAACR,EAAIS,GAAG,UAAUP,EAAG,MAAM,CAACG,YAAY,WAAWE,GAAG,CAAC,MAAQP,EAAIU,YAAY,CAACV,EAAIS,GAAG,YAAYP,EAAG,YAAY,CAACI,MAAM,CAAC,KAAON,EAAIW,UAAU,IAE3aC,EAAkB,G,oCCFlBC,EAAU,CACXC,KAAMA,GAGMD,IAEf,SAASC,EAAKC,EAAcC,EAAeC,GACvC,GAAKC,UAAUC,UAkBfD,UAAUC,UAAUC,UAAUL,GAAMM,MAChC,WACIL,GAAOA,OAEX,SAAUM,GACNL,GAASA,WAvBjB,CACI,IAAIM,EAAWC,SAASC,cAAc,YACtCF,EAASG,MAAQC,OAAOC,SAASC,KACjCN,EAASO,MAAMC,IAAM,IACrBR,EAASO,MAAME,KAAO,IACtBT,EAASO,MAAMG,SAAW,QAC1BT,SAASU,KAAKC,YAAYZ,GAC1BA,EAASa,QACTb,EAASc,SACT,IACIb,SAASc,YAAY,QACrBtB,GAAOA,IACT,MAAOM,GACLL,GAASA,IAEbO,SAASU,KAAKK,YAAYhB,I,gBCtBlB,knB,YCWhB,IAAqBiB,EAArB,cAAyCC,OAAzCC,c,oBACE,KAAA/B,MAAQA,EAKR,KAAAgC,OAAc,KAoDd,KAAAC,YAAcjC,EAxDdkC,UACEC,QAAQC,IAAIpC,GAIdH,aACE,IAAIwC,EAAO/C,KACX6C,QAAQC,IAAI,gBACZ,IAAIE,EAAU,CACZC,MAAO,CACLC,OAAQ,UAEVC,OAAO,GAETJ,EAAKK,aAAaJ,GAEpBvC,YACEoC,QAAQC,IAAI,UAEI,mBAACO,GACjB,IAAIN,EAAO/C,KACPsD,EAAgB,KACpB,IACEA,QAAsBrC,UAAUsC,aAAaC,gBAC3CH,GAEFN,EAAKL,OAASY,EACdP,EAAKU,KAAKH,GACVT,QAAQC,IAAI,gBACZD,QAAQC,IAAIQ,GAWZ,MAAOjC,GACPwB,QAAQa,MAAM,UAAYrC,GAE5B,OAAOiC,EAGTG,KAAKf,GACH,MAAMO,EAAa1B,SAASoC,eAAe,SAC3CV,EAAMW,UAAYlB,EAClBO,EAAMY,UAAW,EACjBZ,EAAMa,OAGRC,cAIAC,kBACEC,EAAMpD,KAAKb,KAAK2C,YAAa,KACjBuB,aAAQC,QAAQ,SAEpB,KACID,aAAQR,MAAM,YAhETnB,EAAW,gBAH/B6B,eAAU,CACTC,WAAY,CAACC,cAAQC,oBAEFhC,WCX6X,I,wBCQ9YiC,EAAY,eACd,EACA1E,EACAa,GACA,EACA,KACA,KACA,MAIa,aAAA6D,E","file":"js/chunk-48c168c4.9ef5821c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5fba07f6&prod&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"share-screen\"},[_c('video',{staticClass:\"video\",attrs:{\"id\":\"video\"}}),_c('div',{staticClass:\"btn-wrap\"},[_c('div',{staticClass:\"start-btn\",on:{\"click\":_vm.startShare}},[_vm._v(\"开始共享\")]),_c('div',{staticClass:\"stop-btn\",on:{\"click\":_vm.stopShare}},[_vm._v(\"结束共享\")])]),_c('code-show',{attrs:{\"code\":_vm.codes}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var oModule = {\n   copy: copy\n}\n\nexport default oModule;\n\nfunction copy(text: string, fcb: Function, errCb: Function) {\n    if (!navigator.clipboard) {\n        let textArea = document.createElement('textarea');\n        textArea.value = window.location.href;\n        textArea.style.top = '0';\n        textArea.style.left = '0';\n        textArea.style.position = 'fixed';\n        document.body.appendChild(textArea);\n        textArea.focus();\n        textArea.select();\n        try {\n            document.execCommand('copy');\n            fcb && fcb();\n        } catch (err) {\n            errCb && errCb();\n        }\n        document.body.removeChild(textArea);\n        return;\n    }\n    navigator.clipboard.writeText(text).then(\n        function () {\n            fcb && fcb();\n        },\n        function (err) {\n            errCb && errCb();\n        }\n    );\n}","export default `let options = {\n    video: {\n      cursor: \"always\",\n    },\n    audio: false,\n  };\nasync startCapture(displayMediaOptions: any) {\n  let that = this;\n  let captureStream = null;\n  try {\n    captureStream = await navigator.mediaDevices.getDisplayMedia(\n      displayMediaOptions\n    );\n    that.stream = captureStream;\n    that.live(captureStream);\n  } catch (err) {\n    console.error(\"Error: \" + err);\n  }\n  return captureStream;\n} // 创建一个video标签进行播放流\nlive(stream: any) {\n  const video: any = document.getElementById(\"video\");\n  video.srcObject = stream;\n  video.controls = true;\n  video.play();\n}`\n","\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport Editor from '@/components/monacoEditor.vue';\r\nimport utils from '@/utils/utils';\r\nimport { Message } from 'element-ui';\r\nimport codes from '@/data/codes/shareScreen/index';\r\nimport CodeShow from '@/components/CodeShow.vue';\r\n\r\n@Component({\r\n  components: {Editor, CodeShow},\r\n})\r\nexport default class ShareScreen extends Vue {\r\n  codes = codes;\r\n  mounted() {\r\n    console.log(codes)\r\n  }\r\n\r\n  stream: any = null;\r\n  startShare() {\r\n    let that = this;\r\n    console.log(\"开始共享屏幕......\");\r\n    let options = {\r\n      video: {\r\n        cursor: \"always\",\r\n      },\r\n      audio: false,\r\n    };\r\n    that.startCapture(options);\r\n  }\r\n  stopShare() {\r\n    console.log(\"结束共享屏幕\");\r\n  }\r\n  async startCapture(displayMediaOptions: any) {\r\n    let that = this;\r\n    let captureStream = null;\r\n    try {\r\n      captureStream = await navigator.mediaDevices.getDisplayMedia(\r\n        displayMediaOptions\r\n      );\r\n      that.stream = captureStream;\r\n      that.live(captureStream);\r\n      console.log(\"captureSream\");\r\n      console.log(captureStream);\r\n      /*\r\n    MediaStream {id: 'hW1oXkU2lBWzXvaHphmc7143NvEgzcrDWUeT', active: true, onaddtrack: null, onremovetrack: null, onactive: null, …}\r\nactive: true\r\nid: \"hW1oXkU2lBWzXvaHphmc7143NvEgzcrDWUeT\"\r\nonactive: null\r\nonaddtrack: null\r\noninactive: null\r\nonremovetrack: null\r\n[[Prototype]]: MediaStream\r\n     */\r\n    } catch (err) {\r\n      console.error(\"Error: \" + err);\r\n    }\r\n    return captureStream;\r\n  }\r\n  // 创建一个video标签进行播放流\r\n  live(stream: any) {\r\n    const video: any = document.getElementById(\"video\");\r\n    video.srcObject = stream;\r\n    video.controls = true;\r\n    video.play();\r\n  }\r\n\r\n  pushStream() {\r\n    // 通过webRTC进行推流\r\n  }\r\n  codeContent = codes as string;\r\n  copyCodeContent() {\r\n    utils.copy(this.codeContent, () => {\r\n                Message.success('复制成功');\r\n            },\r\n            () => {\r\n                Message.error('复制失败');\r\n            });\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5fba07f6&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5fba07f6&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}